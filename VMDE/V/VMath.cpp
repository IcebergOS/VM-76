//=============================================================================
// ■ VMath.cpp
//-----------------------------------------------------------------------------
//   提供一些标准库里没有的数学常量。
//=============================================================================

#include "../global.hpp"

namespace VMath {
	//-------------------------------------------------------------------------
	// ● 常量
	//-------------------------------------------------------------------------
	const float PIf = acos(-1.0f);
	const double PI = acos(-1.0); // no suffix
	const long double PIl = acos(-1.0l);
	//-------------------------------------------------------------------------
	// ● 变量
	//-------------------------------------------------------------------------
	// 为了避免反复计算，将正弦值存储在这里。
	// 当VMATH_SINE_TABLE_SIZE为256时，其分布为
	// [0] = sin 0
	// [64] = sin ⅛π
	// [128] = sin ¼π
	// [192] = sin ⅜π
	float sine_table[VMATH_SINE_TABLE_SIZE];
	//-------------------------------------------------------------------------
	// ● 初始化
	//-------------------------------------------------------------------------
	void init() {
		populate_sine_table();
	}
	//-------------------------------------------------------------------------
	// ● 向正弦表中填充数据
	//-------------------------------------------------------------------------
	void populate_sine_table() {
		float k = 0.5f / (float) VMATH_SINE_TABLE_SIZE * PIf;
		for (size_t i = 0; i < VMATH_SINE_TABLE_SIZE; i++) sine_table[i] = sin(i * k);
	}
}
