//=============================================================================
// ■ VBinaryFileWriter.cpp
//-----------------------------------------------------------------------------
//   在各计算机之间兼容的二进制文件写出类。
//=============================================================================

#include "../global.hpp"

namespace V {
	#define ERROR_MESSAGE "error: lorem ipsum"
	//-------------------------------------------------------------------------
	// ● 构造
	//-------------------------------------------------------------------------
	VBinaryFileWriter::VBinaryFileWriter(const char* filename) {
		f = fopen(filename, "wb");
		if (!f) error(ERROR_MESSAGE);
	}
	//-------------------------------------------------------------------------
	// ● 析构
	//-------------------------------------------------------------------------
	VBinaryFileWriter::~VBinaryFileWriter() {
		fclose(f);
	}
	//-------------------------------------------------------------------------
	// ● 写入1字节int
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_i8(int8_t v) {
		write_directly<int8_t>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入4字节int
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_i32(int32_t v) {
		write_directly<int32_t>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入8字节int
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_i64(int64_t v) {
		write_directly<int64_t>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入1字节unsigned
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_u8(uint8_t v) {
		write_directly<uint8_t>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入4字节unsigned
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_u32(uint32_t v) {
		write_directly<uint32_t>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入8字节unsigned
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_u64(uint64_t v) {
		write_directly<uint64_t>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入4字节float
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_float(float v) {
		write_directly<float>(v);
	}
	//-------------------------------------------------------------------------
	// ● 写入8字节double
	//-------------------------------------------------------------------------
	void VBinaryFileWriter::write_double(double v) {
		write_directly<double>(v);
	}
}
